name: ğŸ”§ Build Toolchain

on:
  workflow_dispatch:
    inputs:
      openwrt_version:
        description: 'OpenWrt Version'
        required: true
        default: 'openwrt-24.10'
        type: choice
        options:
          - openwrt-24.10      # æœ€æ–°ç¨³å®šç‰ˆ
          - openwrt-23.05
          - openwrt-22.03
          - master
      target:
        description: 'Target Platform (e.g., x86/64, ramips/mt7621)'
        required: true
        default: 'x86/64'
        type: string
      force_rebuild:
        description: 'Force rebuild even if toolchain exists'
        required: false
        default: false
        type: boolean
  
  schedule:
    - cron: '0 2 * * 0'  # æ¯å‘¨æ—¥ 02:00 UTC
  
  repository_dispatch:
    types: [toolchain-rebuild]

env:
  OPENWRT_VERSION: ${{ github.event.inputs.openwrt_version || 'openwrt-24.10' }}
  TARGET_PLATFORM: ${{ github.event.inputs.target || 'x86/64' }}
  TOOLCHAIN_DIR: /workdir/toolchain
  TZ: Asia/Shanghai

jobs:
  check-existing:
    name: ğŸ” Check Existing Toolchain
    runs-on: ubuntu-24.04
    outputs:
      should_build: ${{ steps.check.outputs.should_build }}
      toolchain_hash: ${{ steps.check.outputs.toolchain_hash }}
    
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ” Check Existing Toolchain
        id: check
        run: |
          # è®¡ç®—å·¥å…·é“¾æ ‡è¯†
          TARGET_HASH=$(echo "${{ env.OPENWRT_VERSION }}-${{ env.TARGET_PLATFORM }}" | md5sum | cut -d' ' -f1)
          echo "toolchain_hash=$TARGET_HASH" >> $GITHUB_OUTPUT
          
          # æ£€æŸ¥æ˜¯å¦å­˜åœ¨
          if gh release view "toolchain-$TARGET_HASH" >/dev/null 2>&1; then
            if [ "${{ github.event.inputs.force_rebuild }}" == "true" ]; then
              echo "ğŸ”„ Force rebuild requested"
              echo "should_build=true" >> $GITHUB_OUTPUT
            else
              echo "âœ… Toolchain already exists"
              echo "should_build=false" >> $GITHUB_OUTPUT
            fi
          else
            echo "ğŸ†• Toolchain not found, will build"
            echo "should_build=true" >> $GITHUB_OUTPUT
          fi
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  build-toolchain:
    name: ğŸ”¨ Build Toolchain
    needs: check-existing
    if: needs.check-existing.outputs.should_build == 'true'
    runs-on: ubuntu-24.04
    
    steps:
      # ============================================
      # 1. æ£€å‡ºä»£ç 
      # ============================================
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      # ============================================
      # 2. åˆå§‹åŒ–ç¯å¢ƒï¼ˆUbuntu 24.04 ä¼˜åŒ–ï¼‰
      # ============================================
      - name: ğŸ”§ Initialize Environment
        run: |
          sudo timedatectl set-timezone "$TZ"
          echo "BUILD_DATE=$(date +'%Y.%m.%d')" >> $GITHUB_ENV
          
          # ç‰ˆæœ¬å’Œæ„å»ºä¿¡æ¯
          VERSION=$(date +'%Y.%m.%d')
          BUILD_ID="${{ github.run_number }}-${GITHUB_SHA::7}"
          JOBS=$(nproc)
          
          # ğŸ”¥ åˆ›å»ºå®‰å…¨çš„æ–‡ä»¶åï¼ˆç§»é™¤ç‰¹æ®Šå­—ç¬¦ï¼‰
          TARGET_SAFE=$(echo "${{ env.TARGET_PLATFORM }}" | sed 's/[\/:]/-/g')
          
          {
            echo "BUILD_VERSION=$VERSION"
            echo "BUILD_ID=$BUILD_ID"
            echo "COMPILE_JOBS=$JOBS"
            echo "WEEK_KEY=$(date +'%Y%U')"
            echo "FILE_DATE=$(date +'%Y.%m.%d-%H%M')"
            echo "TARGET_SAFE=$TARGET_SAFE"
          } >> $GITHUB_ENV
          
          # åˆ›å»ºå·¥ä½œç›®å½•
          sudo mkdir -p /workdir
          sudo chown $USER:$GROUPS /workdir
                 
          echo ""
          echo "ğŸ“Š System Information:"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ–¥ï¸  OS: $(lsb_release -d | cut -f2)"
          echo "ğŸ”§ Kernel: $(uname -r)"
          echo "ğŸ’» CPU: $(nproc) cores"
          echo "ğŸ’¾ Memory: $(free -h | awk '/^Mem:/ {print $2}')"
          echo "ğŸ’¿ Disk: $(df -h /workdir | awk 'NR==2 {print $4}') available"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo ""
          echo "âœ… Environment initialized"

      - name: ğŸ§¹ Free Disk Space
        uses: sbwml/actions@free-disk
        
      - name: ğŸ› ï¸ Build System Setup
        uses: sbwml/actions@openwrt-build-setup
        
      - name: ğŸ“¦ Install LLVM
        uses: sbwml/actions@install-llvm
        
      # ============================================
      # 3. å…‹éš† OpenWrt æºç 
      # ============================================
      - name: ğŸ“¦ Clone OpenWrt Source
        working-directory: /workdir
        run: |
          echo "ğŸ“¦ Cloning OpenWrt ${{ env.OPENWRT_VERSION }}..."
          
          git clone --depth 1 --branch ${{ env.OPENWRT_VERSION }} \
            https://github.com/openwrt/openwrt.git openwrt
          
          ln -sf /workdir/openwrt $GITHUB_WORKSPACE/openwrt
          
          cd openwrt
          echo ""
          echo "ğŸ“‹ OpenWrt Information:"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "Version: ${{ env.OPENWRT_VERSION }}"
          echo "Commit: $(git log -1 --oneline)"
          echo "Date: $(git log -1 --format=%cd)"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo ""
          echo "âœ… Source code cloned"

      # ============================================
      # 4. æ›´æ–° Feeds
      # ============================================
      - name: ğŸ”„ Update Feeds
        working-directory: /workdir/openwrt
        run: |
          echo "ğŸ”„ Updating feeds..."
          
          # æ˜¾ç¤º feeds é…ç½®
          echo "ğŸ“‹ Feeds configuration:"
          cat feeds.conf.default
          echo ""
          
          ./scripts/feeds update -a
          ./scripts/feeds install -a
          
          echo "âœ… Feeds updated"

      # ============================================
      # 5. ç”Ÿæˆå·¥å…·é“¾é…ç½®
      # ============================================
      - name: âš™ï¸ Generate Toolchain Config
        working-directory: /workdir/openwrt
        run: |
          echo "âš™ï¸ Generating toolchain configuration..."
          
          # è§£æç›®æ ‡å¹³å°
          TARGET=$(echo ${{ env.TARGET_PLATFORM }} | cut -d'/' -f1)
          SUBTARGET=$(echo ${{ env.TARGET_PLATFORM }} | cut -d'/' -f2)
          
          # è½¬æ¢ä¸ºå¤§å†™ï¼ˆç”¨äºé…ç½®ï¼‰
          TARGET_UPPER=$(echo $TARGET | tr '[:lower:]' '[:upper:]' | tr '-' '_')
          SUBTARGET_UPPER=$(echo $SUBTARGET | tr '[:lower:]' '[:upper:]' | tr '-' '_')
          
          # ç”Ÿæˆæœ€å°é…ç½®ï¼ˆOpenWrt 24.10 ä¼˜åŒ–ï¼‰
          cat > .config <<EOF
          CONFIG_TARGET_${TARGET}=y
          CONFIG_TARGET_${TARGET}_${SUBTARGET}=y
          
          # å·¥å…·é“¾é€‰é¡¹
          CONFIG_DEVEL=y
          CONFIG_TOOLCHAINOPTS=y
          CONFIG_CCACHE=y
          
          # ä½¿ç”¨ LLVM/Clangï¼ˆ24.10 æ–°ç‰¹æ€§ï¼‰
          CONFIG_USE_LLVM_BUILD=y
          CONFIG_USE_LLVM_HOST=y
          
          # ä¼˜åŒ–é€‰é¡¹
          CONFIG_TARGET_OPTIONS=y
          CONFIG_TARGET_OPTIMIZATION="-O2 -pipe -march=native"
          
          # ç¦ç”¨ä¸å¿…è¦çš„åŒ…
          # CONFIG_ALL_KMODS is not set
          # CONFIG_ALL_NONSHARED is not set
          EOF
          
          # å±•å¼€é…ç½®
          make defconfig
          
          echo ""
          echo "ğŸ“‹ Toolchain configuration:"
          grep "^CONFIG_TARGET" .config | head -10
          echo "âœ… Configuration generated"

      # ============================================
      # 6. ä¸‹è½½ä¾èµ–
      # ============================================
      - name: ğŸ“¥ Download Dependencies
        working-directory: /workdir/openwrt
        run: |
          echo "ğŸ“¥ Downloading dependencies..."
          
          make download -j$(nproc) V=s
          
          # æ£€æŸ¥ä¸‹è½½å¤±è´¥çš„æ–‡ä»¶
          echo ""
          echo "ğŸ” Checking for failed downloads..."
          FAILED_COUNT=$(find dl -size 0 2>/dev/null | wc -l)
          if [ $FAILED_COUNT -gt 0 ]; then
            echo "âš ï¸  Found $FAILED_COUNT failed downloads:"
            find dl -size 0 -exec ls -l {} \;
          else
            echo "âœ… All downloads successful"
          fi
          
          echo ""
          echo "ğŸ“Š Download statistics:"
          echo "Total files: $(find dl -type f | wc -l)"
          echo "Total size: $(du -sh dl | cut -f1)"
          echo ""
          echo "âœ… Dependencies downloaded"

      # ============================================
      # 7. ç¼–è¯‘å·¥å…·é“¾
      # ============================================
      - name: ğŸ”¨ Build Toolchain
        id: build_toolchain
        working-directory: /workdir/openwrt
        run: |
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘         ğŸ”¨ Building Toolchain              â•‘"
          echo "â•‘            OpenWrt 24.10                   â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          echo "â° Start time: $(date '+%Y-%m-%d %H:%M:%S')"
          echo "ğŸ–¥ï¸  CPU cores: $(nproc)"
          echo ""
          
          START_TIME=$(date +%s)
          
          # ç¼–è¯‘å·¥å…·é“¾
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ”§ Phase 1: Building tools..."
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          make -j$(nproc) tools/install
          
          echo ""
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ”¨ Phase 2: Building toolchain..."
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          make -j$(nproc) toolchain/install
          
          END_TIME=$(date +%s)
          DURATION=$((END_TIME - START_TIME))
          
          echo ""
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘         âœ… Toolchain Build Complete        â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          echo "â±ï¸  Duration: $((DURATION/3600))h $((DURATION%3600/60))m $((DURATION%60))s"
          echo "ğŸ• End time: $(date '+%Y-%m-%d %H:%M:%S')"
          
          # ccache ç»Ÿè®¡
          echo ""
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“Š ccache Statistics"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          ccache -s

      # ============================================
      # 8. ç”Ÿæˆå·¥å…·é“¾ä¿¡æ¯
      # ============================================
      - name: ğŸ“‹ Generate Toolchain Info
        working-directory: /workdir/openwrt
        run: |
          echo "ğŸ“‹ Generating toolchain information..."
          
          # è·å–å·¥å…·é“¾è·¯å¾„
          TOOLCHAIN_PATH=$(find staging_dir -type d -name "toolchain-*" | head -1)
          
          # è·å–ç¼–è¯‘å™¨ç‰ˆæœ¬
          if [ -d "$TOOLCHAIN_PATH" ]; then
            GCC_VERSION=$($TOOLCHAIN_PATH/bin/*-gcc --version 2>/dev/null | head -1 || echo "N/A")
            BINUTILS_VERSION=$($TOOLCHAIN_PATH/bin/*-ld --version 2>/dev/null | head -1 || echo "N/A")
            CLANG_VERSION=$(clang --version 2>/dev/null | head -1 || echo "N/A")
          else
            GCC_VERSION="N/A"
            BINUTILS_VERSION="N/A"
            CLANG_VERSION="N/A"
          fi
          
          # ç”Ÿæˆä¿¡æ¯æ–‡ä»¶
          cat > toolchain-info.txt <<EOF
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘         Toolchain Information              â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          
          OpenWrt Version: ${{ env.OPENWRT_VERSION }}
          Target Platform: ${{ env.TARGET_PLATFORM }}
          Build Date: $(date '+%Y-%m-%d %H:%M:%S %Z')
          Build Host: Ubuntu 24.04 LTS
          Kernel: $(uname -r)
          Toolchain Hash: ${{ needs.check-existing.outputs.toolchain_hash }}
          
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          Compiler Information
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          
          GCC Version:
          $GCC_VERSION
          
          Binutils Version:
          $BINUTILS_VERSION
          
          Clang Version:
          $CLANG_VERSION
          
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          Directory Structure
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          
          Staging Directory: $(du -sh staging_dir 2>/dev/null | cut -f1)
          Build Directory: $(du -sh build_dir 2>/dev/null | cut -f1)
          
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          Build Features (OpenWrt 24.10)
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          
          âœ… LLVM/Clang Support
          âœ… ccache Enabled
          âœ… Optimized Build Flags
          âœ… Multi-threaded Compilation
          
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          EOF
          
          cat toolchain-info.txt
      # ============================================
      # 9. æ‰“åŒ…å·¥å…·é“¾
      # ============================================
      - name: ğŸ“¦ Package Toolchain
        working-directory: /workdir/openwrt
        run: |
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘         ğŸ“¦ Packaging Toolchain             â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          
          # åˆ›å»ºå·¥å…·é“¾ç›®å½•
          mkdir -p ${{ env.TOOLCHAIN_DIR }}
          
          # å¤åˆ¶å¿…è¦æ–‡ä»¶
          echo "ğŸ“‹ Copying files..."
          cp -r staging_dir ${{ env.TOOLCHAIN_DIR }}/
          cp -r build_dir/toolchain-* ${{ env.TOOLCHAIN_DIR }}/ 2>/dev/null || true
          cp -r build_dir/host ${{ env.TOOLCHAIN_DIR }}/ 2>/dev/null || true
          cp .config ${{ env.TOOLCHAIN_DIR }}/
          cp toolchain-info.txt ${{ env.TOOLCHAIN_DIR }}/
          
          # æ‰“åŒ…
          echo "ğŸ—œï¸  Compressing with maximum compression..."
          cd /workdir
          PACKAGE_NAME="toolchain-${{ env.OPENWRT_VERSION }}-${{ env.TARGET_PLATFORM }}"
          PACKAGE_NAME="${PACKAGE_NAME//\//-}.tar.gz"
          
          # ä½¿ç”¨ pigz è¿›è¡Œå¤šçº¿ç¨‹å‹ç¼©ï¼ˆå¦‚æœå¯ç”¨ï¼‰
          if command -v pigz &> /dev/null; then
            tar -I "pigz -9" -cf "$PACKAGE_NAME" toolchain/
          else
            tar -czf "$PACKAGE_NAME" toolchain/
          fi
          
          # è®¡ç®—æ ¡éªŒå’Œ
          SHA256=$(sha256sum "$PACKAGE_NAME" | cut -d' ' -f1)
          MD5=$(md5sum "$PACKAGE_NAME" | cut -d' ' -f1)
          
          # æ˜¾ç¤ºä¿¡æ¯
          echo ""
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘         ğŸ“Š Package Information             â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          ls -lh "$PACKAGE_NAME"
          echo ""
          echo "ğŸ“¦ Package name: $PACKAGE_NAME"
          echo "ğŸ“ Package size: $(du -sh "$PACKAGE_NAME" | cut -f1)"
          echo "ğŸ” SHA256: $SHA256"
          echo "ğŸ” MD5: $MD5"
          echo ""
          
          # ä¿å­˜ä¿¡æ¯
          echo "PACKAGE_NAME=$PACKAGE_NAME" >> $GITHUB_ENV
          echo "SHA256=$SHA256" >> $GITHUB_ENV
          echo "MD5=$MD5" >> $GITHUB_ENV
      # ============================================
      # 10. ä¸Šä¼  Artifact
      # ============================================
      - name: ğŸ“¦ Upload Toolchain Artifact
        if: success()
        uses: actions/upload-artifact@v4
        with:
          name: toolchain-${{ env.OPENWRT_VERSION }}-${{ env.TARGET_SAFE }}
          path: /workdir/${{ env.PACKAGE_NAME }}
          retention-days: 7
          compression-level: 0
      # ============================================
      # 11. åˆ›å»º Release
      # ============================================
      - name: ğŸš€ Create Release
        if: success()
        uses: softprops/action-gh-release@v1
        with:
          tag_name: toolchain-${{ needs.check-existing.outputs.toolchain_hash }}
          name: ğŸ”§ Toolchain ${{ env.OPENWRT_VERSION }} - ${{ env.TARGET_PLATFORM }}
          files: /workdir/${{ env.PACKAGE_NAME }}
          body: |
            ## ğŸ”§ é¢„ç¼–è¯‘å·¥å…·é“¾
            
            ### ğŸ“‹ åŸºæœ¬ä¿¡æ¯
            - **OpenWrt ç‰ˆæœ¬**: `${{ env.OPENWRT_VERSION }}` â­ æœ€æ–°ç¨³å®šç‰ˆ
            - **ç›®æ ‡å¹³å°**: `${{ env.TARGET_PLATFORM }}`
            - **æ„å»ºç¯å¢ƒ**: Ubuntu 24.04 LTS
            - **æ„å»ºæ—¶é—´**: `${{ env.BUILD_DATE }}`
            - **å·¥å…·é“¾å“ˆå¸Œ**: `${{ needs.check-existing.outputs.toolchain_hash }}`
            
            ### ğŸ“¦ æ–‡ä»¶ä¿¡æ¯
            - **æ–‡ä»¶å**: `${{ env.PACKAGE_NAME }}`
            - **SHA256**: `${{ env.SHA256 }}`
            - **MD5**: `${{ env.MD5 }}`
            
            ### âœ¨ æ–°ç‰¹æ€§ (OpenWrt 24.10)
            - âœ… LLVM/Clang ç¼–è¯‘å™¨æ”¯æŒ
            - âœ… ä¼˜åŒ–çš„æ„å»ºæ ‡å¿—
            - âœ… æ”¹è¿›çš„ ccache é›†æˆ
            - âœ… æ›´å¿«çš„ç¼–è¯‘é€Ÿåº¦
            
            ### ğŸš€ ä½¿ç”¨æ–¹æ³•
            
            #### æ–¹æ³• 1ï¼šåœ¨ GitHub Actions ä¸­ä½¿ç”¨
            ```yaml
            - name: ğŸ“¥ Download Toolchain
              run: |
                gh release download toolchain-${{ needs.check-existing.outputs.toolchain_hash }} \
                  --pattern "toolchain-*.tar.gz" \
                  --dir /tmp/toolchain
              env:
                GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            
            - name: ğŸ“¦ Extract Toolchain
              run: |
                cd $OPENWRT_PATH
                tar -xzf /tmp/toolchain/toolchain-*.tar.gz -C /tmp/
                cp -r /tmp/toolchain/* ./
